{"ast":null,"code":"//  sourcehttps://frontend.turing.edu/lessons/module-3/redux-i.html?ads_cmpid=6451354298&ads_adid=76255849919&ads_matchtype=&ads_network=g&ads_creative=517671727591&utm_term=&ads_targetid=dsa-19959388920&utm_campaign=&utm_source=adwords&utm_medium=ppc&ttv=2&gclid=EAIaIQobChMIpZmigsb7_wIV09aGCh0YcALkEAAYASAAEgKpx_D_BwE\n\nimport { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\nimport baseURL from '../../../utils/baseURL';\n\n/////////////////////////////////////////////////////////////////////\n// register a new user                                             //\n/////////////////////////////////////////////////////////////////////\n\nexport const registerUserAction = createAsyncThunk('users/register', async (user, _ref) => {\n  let {\n    rejectWithValue,\n    getState,\n    dispatch\n  } = _ref;\n  try {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    // this is the http call \n    const {\n      data\n    } = await axios.post(`${baseURL}/api/users/register`, user, config);\n    return data;\n  } catch (error) {\n    var _error$response;\n    if (!(error !== null && error !== void 0 && error.response)) {\n      throw error;\n    }\n    return rejectWithValue(error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n  }\n});\n\n////////////////////////////////////////////////////////////////////\n// login                                                          //\n////////////////////////////////////////////////////////////////////\n//takes the payload from the login form and sends it to the server\nexport const loginUserAction = createAsyncThunk('users/login', async (userData, _ref2) => {\n  let {\n    rejectWithValue,\n    getState,\n    dispatch\n  } = _ref2;\n  const config = {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n  try {\n    // make http call to the server\n    const {\n      data\n    } = await axios.post(`${baseURL}/api/users/login`, userData, config);\n    // add user to local storage\n    localStorage.setItem('userInfo', JSON.stringify(data));\n    return data;\n  } catch (error) {\n    var _error$response2;\n    if (!(error !== null && error !== void 0 && error.response)) {\n      throw error;\n    }\n    return rejectWithValue(error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data);\n  }\n});\n\n////////////////////////////////////////////////////////////////////\n// logout                                                         //\n////////////////////////////////////////////////////////////////////\n\nexport const logoutAction = createAsyncThunk('user/logout', async (payload, _ref3) => {\n  let {\n    rejectWithValue,\n    getState,\n    dispatch\n  } = _ref3;\n  try {\n    localStorage.removeItem('userInfo');\n  } catch (error) {\n    var _error$response3;\n    if (!(error !== null && error !== void 0 && error.response)) {\n      throw error;\n    }\n    return rejectWithValue(error === null || error === void 0 ? void 0 : (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data);\n  }\n});\n\n// get user from local storage and place into store if theres a value in local storage use that otherwise null\nconst userLoginFromStorage = localStorage.getItem('userInfo') ? JSON.parse(localStorage.getItem('userInfo')) : null;\n\n////////////////////////////////////////////////////////////////////\n// slices                                                         //\n////////////////////////////////////////////////////////////////////\n\nconst usersSlices = createSlice({\n  name: 'users',\n  initialState: {\n    userAuth: userLoginFromStorage\n  },\n  extraReducers: builder => {\n    // register\n    builder.addCase(registerUserAction.pending, (state, action) => {\n      state.loading = true;\n      // state.appErr = undefined;\n      // state.serverErr = undefined;\n    });\n\n    builder.addCase(registerUserAction.fulfilled, (state, action) => {\n      state.loading = false;\n      state.registered = action === null || action === void 0 ? void 0 : action.payload;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n    });\n    builder.addCase(registerUserAction.rejected, (state, action) => {\n      var _action$payload, _action$error;\n      state.loading = false;\n      state.appErr = action === null || action === void 0 ? void 0 : (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.message;\n      state.serverErr = action === null || action === void 0 ? void 0 : (_action$error = action.error) === null || _action$error === void 0 ? void 0 : _action$error.message;\n    });\n    // login\n    builder.addCase(loginUserAction.pending, (state, action) => {\n      state.loading = true;\n      // state.appErr = undefined;\n      // state.serverErr = undefined;\n    });\n\n    builder.addCase(loginUserAction.fulfilled, (state, action) => {\n      state.userAuth = action === null || action === void 0 ? void 0 : action.payload;\n      state.loading = false;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n    });\n    builder.addCase(loginUserAction.rejected, (state, action) => {\n      var _action$payload2, _action$error2;\n      state.appErr = action === null || action === void 0 ? void 0 : (_action$payload2 = action.payload) === null || _action$payload2 === void 0 ? void 0 : _action$payload2.message;\n      state.serverErr = action === null || action === void 0 ? void 0 : (_action$error2 = action.error) === null || _action$error2 === void 0 ? void 0 : _action$error2.message;\n      state.loading = false;\n    });\n    // logout\n    builder.addCase(logoutAction.pending, (state, action) => {\n      state.loading = false;\n      // state.appErr = undefined;\n      // state.serverErr = undefined;\n    });\n\n    builder.addCase(logoutAction.fulfilled, (state, action) => {\n      state.userAuth = undefined;\n      state.loading = false;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n    });\n    builder.addCase(logoutAction.rejected, (state, action) => {\n      var _action$payload3, _action$error3;\n      state.appErr = action === null || action === void 0 ? void 0 : (_action$payload3 = action.payload) === null || _action$payload3 === void 0 ? void 0 : _action$payload3.message;\n      state.serverErr = action === null || action === void 0 ? void 0 : (_action$error3 = action.error) === null || _action$error3 === void 0 ? void 0 : _action$error3.message;\n      state.loading = false;\n    });\n  }\n});\n\n////////////////////////////////////////////////////////////////////\n// export slices                                                  //\n////////////////////////////////////////////////////////////////////\n\nexport default usersSlices.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","baseURL","registerUserAction","user","_ref","rejectWithValue","getState","dispatch","config","headers","data","post","error","_error$response","response","loginUserAction","userData","_ref2","localStorage","setItem","JSON","stringify","_error$response2","logoutAction","payload","_ref3","removeItem","_error$response3","userLoginFromStorage","getItem","parse","usersSlices","name","initialState","userAuth","extraReducers","builder","addCase","pending","state","action","loading","fulfilled","registered","appErr","undefined","serverErr","rejected","_action$payload","_action$error","message","_action$payload2","_action$error2","_action$payload3","_action$error3","reducer"],"sources":["/Users/ecks/Desktop/gettrendy/gettrendy-frontend/src/redux/slices/users/usersSlices.js"],"sourcesContent":["//  sourcehttps://frontend.turing.edu/lessons/module-3/redux-i.html?ads_cmpid=6451354298&ads_adid=76255849919&ads_matchtype=&ads_network=g&ads_creative=517671727591&utm_term=&ads_targetid=dsa-19959388920&utm_campaign=&utm_source=adwords&utm_medium=ppc&ttv=2&gclid=EAIaIQobChMIpZmigsb7_wIV09aGCh0YcALkEAAYASAAEgKpx_D_BwE\r\n\r\nimport { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\nimport baseURL from '../../../utils/baseURL';\r\n\r\n\r\n/////////////////////////////////////////////////////////////////////\r\n// register a new user                                             //\r\n/////////////////////////////////////////////////////////////////////\r\n\r\nexport const registerUserAction = createAsyncThunk(\r\n    'users/register', \r\n    \r\n    async (user, {rejectWithValue, getState, dispatch }) => {\r\n        try {\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n        };\r\n        // this is the http call \r\n        const { data } = await axios.post(\r\n            `${baseURL}/api/users/register`,\r\n            user, \r\n            config\r\n        );\r\n        return data;\r\n        } catch (error) {\r\n            if(!error?.response) {\r\n                throw error;\r\n            }\r\n        return rejectWithValue(error?.response?.data);\r\n        }\r\n    }\r\n);\r\n\r\n////////////////////////////////////////////////////////////////////\r\n// login                                                          //\r\n////////////////////////////////////////////////////////////////////\r\n//takes the payload from the login form and sends it to the server\r\nexport const loginUserAction = createAsyncThunk(\r\n    'users/login',\r\n    async (userData, {rejectWithValue, getState, dispatch}) => {\r\n        const config = {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n            },\r\n        };\r\n        try {\r\n            // make http call to the server\r\n            const { data } = await axios.post(\r\n                `${baseURL}/api/users/login`,\r\n                userData, \r\n                config\r\n            );\r\n            // add user to local storage\r\n            localStorage.setItem('userInfo', JSON.stringify(data));\r\n            return data;\r\n        } catch (error) {\r\n            if(!error?.response) {\r\n                throw error;\r\n            }\r\n            return rejectWithValue(error?.response?.data);\r\n        }\r\n    },\r\n);  \r\n\r\n////////////////////////////////////////////////////////////////////\r\n// logout                                                         //\r\n////////////////////////////////////////////////////////////////////\r\n\r\nexport const logoutAction = createAsyncThunk(\r\n    'user/logout',\r\n    async (payload, { rejectWithValue, getState, dispatch}) => {\r\n        try {\r\n            localStorage.removeItem('userInfo');\r\n        } catch (error) {\r\n            if (!error?.response) {\r\n                throw error;\r\n            }\r\n            return rejectWithValue(error?.response?.data);\r\n        }\r\n    }\r\n);\r\n\r\n\r\n// get user from local storage and place into store if theres a value in local storage use that otherwise null\r\nconst userLoginFromStorage = localStorage.getItem('userInfo')\r\n? JSON.parse(localStorage.getItem('userInfo'))\r\n: null;\r\n\r\n////////////////////////////////////////////////////////////////////\r\n// slices                                                         //\r\n////////////////////////////////////////////////////////////////////\r\n\r\nconst usersSlices = createSlice({\r\n    name: 'users',\r\n    initialState: {\r\n        userAuth: userLoginFromStorage,\r\n    },\r\n    extraReducers: builder => {\r\n        // register\r\n        builder.addCase(registerUserAction.pending, (state, action) => {\r\n            state.loading = true;\r\n            // state.appErr = undefined;\r\n            // state.serverErr = undefined;\r\n        });\r\n        builder.addCase(registerUserAction.fulfilled, (state, action) => {\r\n            state.loading = false;\r\n            state.registered = action?.payload;\r\n            state.appErr = undefined;\r\n            state.serverErr = undefined;\r\n        });\r\n        builder.addCase(registerUserAction.rejected, (state, action) => {\r\n            state.loading = false;\r\n            state.appErr = action?.payload?.message;\r\n            state.serverErr = action?.error?.message;\r\n        });\r\n        // login\r\n        builder.addCase(loginUserAction.pending, (state, action) => {\r\n            state.loading = true;\r\n            // state.appErr = undefined;\r\n            // state.serverErr = undefined;\r\n        });\r\n        builder.addCase(loginUserAction.fulfilled, (state, action) => {\r\n            state.userAuth = action?.payload;\r\n            state.loading = false;\r\n            state.appErr = undefined;\r\n            state.serverErr = undefined;\r\n        });\r\n        builder.addCase(loginUserAction.rejected, (state, action) => {\r\n            state.appErr = action?.payload?.message;\r\n            state.serverErr = action?.error?.message;\r\n            state.loading = false;\r\n        });\r\n        // logout\r\n        builder.addCase(logoutAction.pending, (state, action) => {\r\n            state.loading = false;\r\n            // state.appErr = undefined;\r\n            // state.serverErr = undefined;\r\n        });\r\n        builder.addCase(logoutAction.fulfilled, (state, action) => {\r\n            state.userAuth = undefined;\r\n            state.loading = false;\r\n            state.appErr = undefined;\r\n            state.serverErr = undefined;\r\n        });\r\n        builder.addCase(logoutAction.rejected, (state, action) => {\r\n            state.appErr = action?.payload?.message;\r\n            state.serverErr = action?.error?.message;\r\n            state.loading = false;\r\n        });\r\n    },\r\n});\r\n\r\n\r\n////////////////////////////////////////////////////////////////////\r\n// export slices                                                  //\r\n////////////////////////////////////////////////////////////////////\r\n\r\n\r\nexport default usersSlices.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}